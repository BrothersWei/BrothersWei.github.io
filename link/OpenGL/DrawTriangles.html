<!doctype html>
<html><!-- InstanceBegin template="/Templates/Tamplate.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1"/>
<meta name="msapplication-tap-highlight" content="no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="Milestone">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Milestone">
<meta name="theme-color" content="#4C7FF0">
<!-- InstanceBeginEditable name="doctitle" -->
<title>我的学习笔记</title>
<!-- InstanceEndEditable -->
<!-- build:css({.tmp,app}) styles/app.min.css -->
<link rel="stylesheet" href="../../vendor/bootstrap/dist/css/bootstrap.css" runat="server"/>
<link rel="stylesheet" href="../../styles/app.css" id="load_styles_before" runat="server"/>
<link rel="stylesheet" href="../../styles/app.skins.css" runat="server"/>
<link rel="stylesheet" href="../../styles/Myhighlight.css" runat="server"/>
<link rel="stylesheet" href="../../vendor/highlight/styles/monokai-sublime.css" runat="server"/>
<!-- endbuild -->
</head>
  <body>

    <div class="app">
      <!--sidebar panel-->
      <div class="sidebar-panel">
        <div class="brand"> 
            <!-- /toggle offscreen menu --> 
            <!-- logo --> 
            <a class="brand-logo" href="../../index.html"> <img class="expanding-hidden" src="../../images/logo-dark.png" alt=""/> </a> 
            <!-- /logo --> 
        </div>
        <!-- main navigation -->
        <nav class="menu">
            <hr>
            <ul class="nav">
                <!-- 主页 -->
                <p class="nav-title">主页</p>
                <li> <a href="../../index.html"> <span class="nav-menutext">&emsp;&emsp;首页</span> </a> </li>
                <hr>
                <p class="nav-title">UnrealEngine 4</p>
                <!-- /主页 --> 
                <!-- UnrealEngine4 -->
                <li><a href="javascript:;"> <span class="menu-caret"> <em class="material-icons">arrow_drop_down</em> </span> <span class="nav-menutext">&emsp;&emsp;UE4基础</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../UnrealEngine/Actor.html"> <span class="nav-buttontext">什么是Actor</span> </a> </li>
                        <li> <a href="../UnrealEngine/InputComponent.html"> <span class="nav-buttontext">输入组件</span> </a> </li>
                        <li> <a href="../UnrealEngine/GamePlay.html"> <span class="nav-buttontext">UE4中的GamePlay框架</span> </a> </li>
                        <li> <a href="../UnrealEngine/UnrealMacro.html"> <span class="nav-buttontext">UE4中的宏定义</span> </a> </li>
						<li> <a href="../UnrealEngine/ForceAndTorque.html"> <span class="nav-buttontext">力和扭矩</span> </a> </li>
						<li> <a href="../UnrealEngine/Collision.html"> <span class="nav-buttontext">UE4中的碰撞</span> </a> </li>
						<li> <a href="../UnrealEngine/LineTrace.html"> <span class="nav-buttontext">射线绘制和射线检测</span> </a> </li>
						<li> <a href="../UnrealEngine/Delegates.html"> <span class="nav-buttontext">UE4中的委托</span> </a> </li>
						<li> <a href="../UnrealEngine/SimpleMove.html"> <span class="nav-buttontext">简单的移动</span> </a> </li>
						<li> <a href="../UnrealEngine/SimpleTurn.html"> <span class="nav-buttontext">简单的视野转动</span> </a> </li>
                    </ul>
                </li>
				<li><a href="javascript:;"> <span class="menu-caret"> <em class="material-icons">arrow_drop_down</em> </span> <span class="nav-menutext">&emsp;&emsp;解析第三人称模板</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../UnrealEngine/ThirdPerson/ThirdPersonInit.html"> <span class="nav-buttontext">项目初始化设置</span> </a> </li>
                        <li> <a href="../UnrealEngine/ThirdPerson/ThirdPersonMove.html"> <span class="nav-buttontext">模板中的移动功能</span> </a> </li>
						<li> <a href="../UnrealEngine/ThirdPerson/ThirdPersonTurn.html"> <span class="nav-buttontext">模板中的视野转动功能</span> </a> </li>
						<li> <a href="../UnrealEngine/ThirdPerson/ThirdPersonJump.html"> <span class="nav-buttontext">模板中的跳跃功能</span> </a> </li>
                    </ul>
                </li>
				<li><a href="javascript:;"> <span class="menu-caret"> <em class="material-icons">arrow_drop_down</em> </span> <span class="nav-menutext">&emsp;&emsp;解析第一人称模板</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../UnrealEngine/FirstPerson/FirstPersonInit.html"> <span class="nav-buttontext">项目初始化设置</span> </a> </li>
                        <li> <a href="../UnrealEngine/FirstPerson/FirstPersonFrontSight.html"> <span class="nav-buttontext">模板中的HUD创建准星</span> </a> </li>
						<li> <a href="../UnrealEngine/FirstPerson/FirstPersonProjectile.html"> <span class="nav-buttontext">模板中的发射物设计</span> </a> </li>
						<li> <a href="../UnrealEngine/FirstPerson/FirstPersonFire.html"> <span class="nav-buttontext">模板中的开火功能</span> </a> </li>
                    </ul>
                </li>
				<li><a href="javascript:;"> <span class="menu-caret"> <em class="material-icons">arrow_drop_down</em> </span> <span class="nav-menutext">&emsp;&emsp;UE4蓝图库</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../UnrealEngine/Blueprint/SimpleMoveAndTurn.html"> <span class="nav-buttontext">角色简单的控制</span> </a> </li>
                        <li> <a href="../UnrealEngine/Blueprint/ZoomAndRun.html"> <span class="nav-buttontext">瞄准与奔跑功能</span> </a> </li>
                    </ul>
                </li>
				<li><a href="javascript:;"> <span class="menu-caret"> <em class="material-icons">arrow_drop_down</em> </span> <span class="nav-menutext">&emsp;&emsp;UE4材质</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../UnrealEngine/Materials/MaterialsNodes.html"> <span class="nav-buttontext">常用节点</span> </a> </li>
                        
                    </ul>
                </li>
                <!-- /UnrealEngine4 -->
            </ul>
            <p class="nav-title">其他</p>
            <ul class="nav">
				<!-- 指针 -->
				<li> <a href="javascript:;"> <span class="menu-caret"> <i class="material-icons">arrow_drop_down</i> </span> <span class="nav-menutext">&emsp;&emsp;指针</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../Pointer/WhatIsPointer.html"> <span class="nav-buttontext">指针简介</span> </a> </li>
						<li> <a href="../Pointer/PointerToPointer.html"> <span class="nav-buttontext">多级指针</span> </a> </li>
						<li> <a href="../Pointer/ViodPointer.html"> <span class="nav-buttontext">void指针</span> </a> </li>
						<li> <a href="../Pointer/PointerAndArrays.html"> <span class="nav-buttontext">指针和数组</span> </a> </li>
						<li> <a href="../Pointer/ArraysAsFun.html"> <span class="nav-buttontext">数组作为函数的参数</span> </a> </li>
						<li> <a href="../Pointer/PointerAndTwoDimensionalArrays.html"> <span class="nav-buttontext">指针和二维数组</span> </a> </li>
                    </ul>
                </li>
				<!-- /指针 -->
                <!-- OpenGL -->
                <li> <a href="javascript:;"> <span class="menu-caret"> <i class="material-icons">arrow_drop_down</i> </span> <span class="nav-menutext">&emsp;&emsp;OpenGL笔记</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="EnvironmentBuilding.html"> <span class="nav-buttontext">环境搭建</span> </a> </li>
						<li> <a href="CreateOpenGLWindow.html"> <span class="nav-buttontext">新建窗口</span> </a> </li>
						<li> <a href="DrawTriangles.html"> <span class="nav-buttontext">绘制三角形</span> </a> </li>
                    </ul>
                </li>
                <!-- /OpenGL --> 
                <!-- 设计模式 -->
                <li> <a href="javascript:;"> <span class="menu-caret"> <i class="material-icons">arrow_drop_down</i> </span> <span class="nav-menutext">&emsp;&emsp;设计模式</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../DesignPatterns/Singleton.html"> <span class="nav-buttontext">单例模式</span> </a> </li>
                        <!--<li> <a href="../link/DesignPatterns/Factory.html"> <span class="nav-buttontext">工厂模式</span> </a> </li>-->
                    </ul>
                </li>
                <!-- /设计模式 -->
				<!-- C++多线程 -->
                <!--<li> <a href="javascript:;"> <span class="menu-caret"> <i class="material-icons">arrow_drop_down</i> </span> <span class="nav-menutext">&emsp;&emsp;C++多线程编程</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../link/CPPMultithreading/ProcessAndThread.html"> <span class="nav-buttontext">进程和线程</span> </a> </li>
                    </ul>
                </li>-->
                <!-- /C++多线程 -->
                <li>
                    <hr/>
                </li>
                <!-- static -->
                <p class="nav-title">关于我</p>
                <li> <a href="#"> <span class="nav-menutext">&emsp;&emsp;个人简历</span> </a> </li>
				<li> <a href="../AboutMe/AboutBlog.html"> <span class="nav-menutext">&emsp;&emsp;关于博客</span> </a> </li>
                <!-- /static -->
            </ul>
        </nav>
        <!-- /main navigation --> 
    </div>
      <!-- /sidebar panel -->
      <!-- content panel -->
      <div class="main-panel">
        <!-- top header -->
        <nav class="header navbar">
          <div class="header-inner">
            <div class="navbar-item navbar-spacer-right brand hidden-lg-up">
              <!-- toggle offscreen menu -->
              <a href="javascript:;" data-toggle="sidebar" class="toggle-offscreen">
                <i class="material-icons"><img src="../../images/button-1.png"></i>
              </a>
              <!-- /toggle offscreen menu -->
              <!-- logo --><!-- InstanceBeginEditable name="title1" -->
              <spen class="spenMenu">&ensp;绘制三角形</spen>
              <!-- InstanceEndEditable --><!-- /logo -->
            </div>
            <!-- InstanceBeginEditable name="title2" --><span class="navbar-item navbar-spacer-right navbar-heading hidden-md-down">绘制三角形</span><!-- InstanceEndEditable --></div>
        </nav>
        <!-- /top header -->

        <!-- main area -->
        <!-- InstanceBeginEditable name="main" -->
        <div class="main-content">
            <div class="content-view">
                <div class="row">
                    <div class="col-xs-1"></div>
                    <div class="col-xs-10"> <br>
                        <br>
                        <h3 class="FontTitle">OpenGL的渲染流程</h3><br>
                        <p class="FontParagraph">&emsp;&emsp;在OpenGL中，我们的渲染流程如下图：</p>
						<center><img src="img/DrawTriangles/1.png" alt=""></center><br>
						<p class="FontParagraph">&emsp;&emsp;其中蓝色的部分为可编程部分，其中：顶点着色器的作用为画点，几何着色器的作用为裁剪和特效效果的制作，片段着色器的效果为上色。在本例中，我们仅仅只是画一个三角形，所以用不到几何着色器，我们使用默认的即可。</p><br>
						<h3 class="FontTitle">创建顶点着色器</h3><br>
                        <p class="FontParagraph">&emsp;&emsp;我们的着色器语言使用的是GLSL，在我们当前的环境中，我们需要用一个字符串来编写着色器语言，再创建我们的顶点着色器然后将着色器语言附加到我们创建的着色器上，然后再进行动态编译，创建着色器的过程如下：</p>
						<pre><code class="language-c++">
    // 顶点着色器代码
    const char* vertexShaderSource = "#version 400 core\n"
    "layout (location = 0) in vec3 aPos;\n"
    "void main(){\n"
    "   gl_Position = vec4(aPos.x, aPos.y, aPos.z, 1.0);\n"
    "}\0";
    // 创建顶点着色器
    unsigned int vertexShader = glCreateShader(GL_VERTEX_SHADER);
    // 将顶点着色器代码附加到顶点着色器上并编译它
    glShaderSource(vertexShader, 1, &amp;vertexShaderSource, NULL);// 绑定
    glCompileShader(vertexShader);// 编译
	
								</code></pre>
						<h3 class="FontTitle">创建片段着色器</h3><br>
                        <p class="FontParagraph">&emsp;&emsp;创建片段着色器的过程与顶点着色器类似，过程如下：</p>
						<pre><code class="language-c++">
    // 片段着色器代码
    const char* fragmentShaderSource = "#version 400 core\n"
    "out vec4 FragColor;\n"
    "void main(){\n"
    "   FragColor = vec4(1.0f, 0.5f, 0.2f, 1.0f);\n"
    "}\0";
    // 创建片段着色器
    unsigned int fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);
    // 将片段着色器代码附加到片段着色器上并编译它
    glShaderSource(fragmentShader, 1, &amp;fragmentShaderSource, NULL);// 绑定
    glCompileShader(fragmentShader);// 编译
	
								</code></pre>
						<h3 class="FontTitle">着色器的错误提示输出方法</h3><br>
                        <p class="FontParagraph">&emsp;&emsp;因为我们的着色器语言是使用字符串绑定到着色器上进行动态编译的，所以当着色器语言出现编译错误时，我们的编译器不会给出任何的提示，但是我们可以通过以下方式将错误信息输出出来：</p>
						<pre><code class="language-c++">
    int  success;     // 判断着色器编译是否成功
    char infoLog[512];// 错误信息字符串
    glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;success);
    if(!success){
        glGetShaderInfoLog(vertexShader, 512, NULL, infoLog);
        std::cout &lt;&lt; "ERROR::SHADER:\n" &lt;&lt; infoLog &lt;&lt; std::endl;
    }
								</code></pre>
						<h3 class="FontTitle">VAO和VBO</h3><br>
                        <p class="FontParagraph">&emsp;&emsp;简单来说，VBO就是显存中存储的每一个顶点的数据信息，包括顶点坐标和颜色，而VAO是用来存放VOB信息和EBO信息的集合，而EBO我们后面再讨论，本例中用不到</p>
						<p class="FontParagraph">&emsp;&emsp;而生成和绑定一个VBO的方式如下：</p>
						<pre><code class="language-c++">
    // 三角形的顶点位置
    float vertices[] = {
        -0.5f, -0.5f, 0.0f,
         0.5f, -0.5f, 0.0f,
         0.0f,  0.5f, 0.0f
    };
    // 生成一个VBO
    unsigned int VBO;
    glGenBuffers(1, &amp;VBO);
    // 绑定VBO
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    // 将顶点数据复制到缓冲内存中
    /*其中，glBufferData()的最后一个参数表示：
     *GL_STATIC_DRAW：数据不会或几乎不会改变
     *GL_DYNAMTC_DRAW：数据会改变很多
     *GL_STREAM_DRAW：数据在每次绘制时都会改变
    */
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
    
								</code></pre>
						<p class="FontParagraph">&emsp;&emsp;生成和绑定一个VAO的方式如下：</p>
						<pre><code class="language-c++">
    // 生成一个VAO
    unsigned int VAO;
    glGenVertexArrays(1, &amp;VAO);
    // 绑定VAO
    glBindVertexArray(VAO);
    // 设置顶点属性指针
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), (void*)0);
    glEnableVertexAttribArray(0);
    
								</code></pre>
						<h3 class="FontTitle">使用着色器对象和VAO绘制三角形</h3><br>
                        <p class="FontParagraph">&emsp;&emsp;我们现在有了着色器和VAO，我们需要使用它们绘制我们的三角形，所以我们需要创建一个着色器对象来绑定我们的着色器，再使用VAO数据来绘制出我们的三角形，代码如下：</p>
						<pre><code class="language-c++">
    // 创建一个着色器对象
    unsigned int shaderProgram = glCreateProgram();;
    // 将顶点着色器和片段着色器链接到着色器对象上
    glAttachShader(shaderProgram, vertexShader);
    glAttachShader(shaderProgram, fragmentShader);
    glLinkProgram(shaderProgram);
	
    // 渲染
	while (!glfwWindowShouldClose(window)) {
        // 使用着色器对象和VAO绘制三角形
        glUseProgram(shaderProgram);
        glBindVertexArray(VAO);
        glDrawArrays(GL_TRIANGLES, 0, 3); // 绘制三角形

        // 检查并调用事件
        glfwSwapBuffers(window);
        // 交换缓冲区域
        glfwPollEvents();
	}
	
								</code></pre>
						<p class="FontParagraph">&emsp;&emsp;输出结果如下图：</p>
						<center><img src="img/DrawTriangles/2.png" alt=""></center><br><br>
						<p class="FontParagraph">&emsp;&emsp;本例完整代码如下：</p>
						<pre><code class="language-c++">
    #include "glad/glad.h"
    #include "GLFW/glfw3.h"
    #include "iostream"
    using namespace std;

    // 函数的声明
    void framebuffer_size_callback(GLFWwindow* window, int width, int height);
    void processInput(GLFWwindow* window);

    // 顶点着色器代码
    const char* vertexShaderSource = "#version 400 core\n"
    "layout (location = 0) in vec3 aPos;\n"
    "void main(){\n"
    "   gl_Position = vec4(aPos.x, aPos.y, aPos.z, 1.0);\n"
    "}\0";
    // 片段着色器代码
    const char* fragmentShaderSource = "#version 400 core\n"
    "out vec4 FragColor;\n"
    "void main(){\n"
    "   FragColor = vec4(1.0f, 0.5f, 0.2f, 1.0f);\n"
    "}\0";


    int main() {
        // 初始化GLFW
        glfwInit();
        // 设置OpenGL版本号为4.0
        glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 4);
        glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 0);
        // 配置GLFW
        glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

        // 使用GLFW创建窗口，传入的参数为窗口的长宽，字符串为这个窗口的名字
        GLFWwindow* window = glfwCreateWindow(800, 600, "HelloOpenGL", NULL, NULL);
        if (window == NULL) {
            cout &lt;&lt; "Failed to create GLFW window" &lt;&lt; endl;
            glfwTerminate();
            return -1;
        }
        // 使用上下文初始化窗口
        glfwMakeContextCurrent(window);

        // 初始化GLAD
        if (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress)) {
            cout &lt;&lt; "Failed to initialize GLAD" &lt;&lt; endl;
            return -1;
        }
        // 设置渲染窗口，前两个参数为渲染窗口的初始点，后两个参数为渲染窗口的宽高
        glViewport(0, 0, 800, 600);

        // 绑定函数当窗口大小发生变化时重新设置渲染窗口大小
        glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);

        // 创建顶点着色器
        unsigned int vertexShader = glCreateShader(GL_VERTEX_SHADER);
        // 将顶点着色器代码附加到顶点着色器上并编译它
        glShaderSource(vertexShader, 1, &amp;vertexShaderSource, NULL);// 绑定
        glCompileShader(vertexShader);// 编译
	
        // 创建片段着色器
        unsigned int fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);
        // 将片段着色器代码附加到片段着色器上并编译它
        glShaderSource(fragmentShader, 1, &amp;fragmentShaderSource, NULL);// 绑定
        glCompileShader(fragmentShader);// 编译

        // 创建一个着色器对象
        unsigned int shaderProgram = glCreateProgram();;
        // 将顶点着色器和片段着色器链接到着色器对象上
        glAttachShader(shaderProgram, vertexShader);
        glAttachShader(shaderProgram, fragmentShader);
        glLinkProgram(shaderProgram);

        // 三角形的顶点位置
        float vertices[] = {
            -0.5f, -0.5f, 0.0f,
             0.5f, -0.5f, 0.0f,
             0.0f,  0.5f, 0.0f
        };

        // 生成一个VBO
        unsigned int VBO;
        glGenBuffers(1, &amp;VBO);
        // 绑定VBO
        glBindBuffer(GL_ARRAY_BUFFER, VBO);
        // 将顶点数据复制到缓冲内存中
        glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
        // 生成一个VAO
        unsigned int VAO;
        glGenVertexArrays(1, &amp;VAO);
        // 绑定VAO
        glBindVertexArray(VAO);
        // 设置顶点属性指针
        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), (void*)0);
        glEnableVertexAttribArray(0);
	
        // 渲染
        while (!glfwWindowShouldClose(window)) {
            // 绑定输入设置
            processInput(window);

            // 设置颜色
            glClearColor(0.2f, 0.3f, 0.3f, 1.0f);
            glClear(GL_COLOR_BUFFER_BIT);
            // 使用着色器对象和VAO绘制三角形
            glUseProgram(shaderProgram);
            glBindVertexArray(VAO);
            glDrawArrays(GL_TRIANGLES, 0, 3); // 绘制三角形

            // 检查并调用事件
            glfwSwapBuffers(window);
            // 交换缓冲区域
            glfwPollEvents();
        }

        glfwTerminate();
        return 0;
    }

    // 修改渲染窗口大小函数
    void framebuffer_size_callback(GLFWwindow* window, int width, int height) {
        glViewport(0, 0, width, height);
    }

    // 配置输入相关函数
    void processInput(GLFWwindow* window) {
        if (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)
            glfwSetWindowShouldClose(window, true);
    }

	
								</code></pre>
                    </div>
                    <div class="col-xs-1"></div>
                </div>
            </div>
        </div>
        <!-- InstanceEndEditable --><!-- /main area -->
      </div>
      <!-- /content panel -->
    </div>

    <!-- build:js({.tmp,app}) scripts/app.min.js --> 
<script src="../../vendor/jquery/dist/jquery.js" src='<% = ResolveUrl("../vendor/jquery/dist/jquery.js") %>'></script> 
<script src="../../vendor/bootstrap/dist/js/bootstrap.js" src='<% = ResolveUrl("../vendor/bootstrap/dist/js/bootstrap.js") %>'></script> 
<script src="../../scripts/constants.js" src='<% = ResolveUrl("../scripts/constants.js") %>'></script> 
<script src="../../scripts/main.js" src='<% = ResolveUrl("../scripts/main.js") %>'></script> 
<script src="../../vendor/highlight/highlight.pack.js" src='<% = ResolveUrl("../vendor/highlight/highlight.pack.js") %>'></script>
<script language="javascript" type="text/javascript">hljs.initHighlightingOnLoad();</script>
<!-- endbuild -->
  </body>
<!-- InstanceEnd --></html>
