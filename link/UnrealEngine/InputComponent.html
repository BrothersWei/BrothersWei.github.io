<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1"/>
<meta name="msapplication-tap-highlight" content="no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="Milestone">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Milestone">
<meta name="theme-color" content="#4C7FF0">
<title>输入组件</title>

<!-- build:css({.tmp,app}) styles/app.min.css -->
<link rel="stylesheet" href="../../vendor/bootstrap/dist/css/bootstrap.css"/>
<link rel="stylesheet" href="../../styles/app.css" id="load_styles_before"/>
<link rel="stylesheet" href="../../styles/app.skins.css"/>
<link rel="stylesheet" href="../../styles/Myhighlight.css">
<link rel="stylesheet" href="../../vendor/highlight/styles/vs2015.css">
<!-- endbuild -->
  </head>
  <body>

    <div class="app">
      <!--sidebar panel-->
      <div class="sidebar-panel">
        <div class="brand"> 
            <!-- /toggle offscreen menu --> 
            <!-- logo --> 
            <a class="brand-logo" href="../../index.html"> <img class="expanding-hidden" src="../../images/logo-dark.png" alt=""/> </a> 
            <!-- /logo --> 
        </div>
        <!-- main navigation -->
        <nav class="menu">
            <hr>
            <ul class="nav">
                <!-- 主页 -->
                <p class="nav-title">主页</p>
                <li> <a href="../../index.html"> <span class="nav-menutext">&emsp;&emsp;首页</span> </a> </li>
                <hr>
                <p class="nav-title">UnrealEngine 4</p>
                <!-- /主页 --> 
                <!-- UnrealEngine4 -->
                <li><a href="javascript:;"> <span class="menu-caret"> <em class="material-icons">arrow_drop_down</em> </span> <span class="nav-menutext">&emsp;&emsp;UE4基础</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="Actor.html"> <span class="nav-buttontext">什么是Actor</span> </a> </li>
                        <li> <a href="InputComponent.html"> <span class="nav-buttontext">输入组件</span> </a> </li>
                        <li> <a href="GamePlay.html"> <span class="nav-buttontext">UE4中的GamePlay框架</span> </a> </li>
                        <li> <a href="UnrealMacro.html"> <span class="nav-buttontext">UE4中的宏定义</span> </a> </li>
                    </ul>
                </li>
                <!-- /UnrealEngine4 -->
            </ul>
            <hr>
            <p class="nav-title">其他</p>
            <ul class="nav">
                <!-- OpenGL -->
                <li> <a href="javascript:;"> <span class="menu-caret"> <i class="material-icons">arrow_drop_down</i> </span> <span class="nav-menutext">&emsp;&emsp;OpenGL笔记</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../OpenGL/EnvironmentBuilding.html"> <span class="nav-buttontext">环境搭建</span> </a> </li>
                        <li> <a href="../OpenGL/GLFWandGLEW.html"> <span class="nav-buttontext">GLFW与GLEW</span> </a> </li>
                    </ul>
                </li>
                <!-- /OpenGL --> 
                <!-- 设计模式 -->
                <li> <a href="javascript:;"> <span class="menu-caret"> <i class="material-icons">arrow_drop_down</i> </span> <span class="nav-menutext">&emsp;&emsp;设计模式</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../DesignPatterns/Singleton.html"> <span class="nav-buttontext">单例模式</span> </a> </li>
                        <li> <a href="../DesignPatterns/Factory.html"> <span class="nav-buttontext">工厂模式</span> </a> </li>
                    </ul>
                </li>
                <!-- /设计模式 -->
				<!-- C++多线程 -->
                <li> <a href="javascript:;"> <span class="menu-caret"> <i class="material-icons">arrow_drop_down</i> </span> <span class="nav-menutext">&emsp;&emsp;C++多线程编程</span> </a>
                    <ul class="sub-menu">
                        <li> <a href="../CPPMultithreading/ProcessAndThread.html"> <span class="nav-buttontext">进程和线程</span> </a> </li>
                    </ul>
                </li>
                <!-- /C++多线程 -->
                <li>
                    <hr/>
                </li>
                <!-- static -->
                <p class="nav-title">关于我</p>
                <li> <a href="#"> <span class="nav-menutext">&emsp;&emsp;个人简历</span> </a> </li>
                <!-- /static -->
            </ul>
        </nav>
        <!-- /main navigation --> 
    </div>
      <!-- /sidebar panel -->
      <!-- content panel -->
      <div class="main-panel">
        <!-- top header -->
        <nav class="header navbar">
          <div class="header-inner">
            <div class="navbar-item navbar-spacer-right brand hidden-lg-up">
              <!-- toggle offscreen menu -->
              <a href="javascript:;" data-toggle="sidebar" class="toggle-offscreen">
                <i class="material-icons"><img src="../../images/button-1.png" style=""></i>
              </a>
              <!-- /toggle offscreen menu -->
              <!-- logo -->
				<spen class="spenMenu">&ensp;输入组件</spen>
              <!-- /logo -->
            </div>
              <span class="navbar-item navbar-spacer-right navbar-heading hidden-md-down">输入组件</span>
          </div>
        </nav>
        <!-- /top header -->

        <!-- main area -->
        <div class="main-content">
          <div class="content-view">
			  <div class="row">
  				<div class="col-xs-1"></div>
  				<div class="col-xs-10">
					<br><br>
					<h3 class="FontTitle">输入组件</h3><br>
				  	<p class="FontParagraph">&emsp;&emsp;一个 Actor 是怎么接收键盘或者游戏手柄等硬件的输入的呢，那很简单，这个 Actor 里面会有一个组件用来接收来自对应硬件的输入。硬件输入通常包括键盘按键，鼠标点击或鼠标移动，以及手柄控制器按钮按下或手柄操纵杆移动等等。</p>
					<h3 class="FontTitle">PlayerInput 组件</h3>
					<p class="FontParagraph">&emsp;&emsp;PlayerInput 是 PlayerController 中的一个组件，他定义了两个事件，一个是 FInputActionKeyMapping ，它定义了一个 ActionMapping 即按键映射。另一个是 FInputAxisKeyMapping ，它定义了一个 AxisMapping 即轴映射。</p>
					<br>
					<h5 class="FontLiftTitle">&emsp;&emsp;什么是按键映射（ActionMapping）：</h5>
		  			<p class="FontParagraph">&emsp;&emsp;按键映射是指例如有一个跳跃动作，这个动作称之为事件，那么这个动作是通过一个按键来触发的，例如按下空格键，也就是说，通过硬件的的按钮的按下的瞬间或者松开的瞬间会触发的事件就称为按键映射</p>
		  			<h5 class="FontLiftTitle">&emsp;&emsp;什么是轴映射（AxisMapping）：</h5>
		  			<p class="FontParagraph">&emsp;&emsp;轴映射与按键映射不同之处在于，它定义了返回值，而且事件的触发不再是按下瞬间或者是松开瞬间，轴映射事件只要按着所定义的按键就会一直触发，其返回值一般用于表示方向，例如有个 MoveForward 轴映射事件，定义了 W 键返回 1，S 键返回 -1，那么在使用的时候会利用这个返回只乘上前进方向的方向向量就会获得我们对应按键对应的移动方向，即 W 为前进正方向，S 为前进反方向，即向后移动。</p>
					<br>
		  			<p class="FontParagraph">&emsp;&emsp;不管是按键映射还是轴映射，我们都不用去写他的代码，因为 UE4 已经将接口帮我们写好了，我们只需在菜单栏中点击 Edit(编辑)-&gt;Project Settings(项目设置)中的输入一栏中设置即可，如下图：</p>
					<center><img src="img/InputComponent/1.png" style=""></center>
		  			<center><p class="YellowFont">点击加号即可进行相对应的设置</p></center>
					<br>
		  			<h3 class="FontTitle">输入组件 InputComponent</h3>
		  			<p class="FontParagraph">&emsp;&emsp;这个组件是用来链接我们设置的按键映射和轴映射的，在里面写相对于的映射事件应该对应的具体代码。</p>
		  			<p class="FontParagraph">&emsp;&emsp;例如我们有一个 <font class="PreprocessorMacros">Character</font> ，他的名字叫做 <font class="StringText">MyCharacter</font> ，那么绑定按键映射的具体步骤如下（代码可以左滑查看全部）：</p>
					<pre><code class="language-c++"><p>在 AMyCharacter.cpp 中，</p>
    void <font class="Class">AMyCharacter</font>::<font class="Function">SetupPlayerInputComponent</font>(<font class="KeyWord">class</font> <font class = "Class">UInputComponent</font>* <font class="Variables">InputComponent</font>) {        
        <font class="Function">check</font>(<font class="Variables">InputComponent</font>));
        // 以上内容是自带的，下面这句才是你要写的
        <font class="Variables">InputComponent</font>-&gt;<font class="Function">BindAction</font>("Jump", <font class="PreprocessorMacros">IE_Pressed</font>, this, &amp;<font class="Class">AMyCharacter</font>::<font class="Function">Jump</font>);
    }
    void <font class="Class">AMyCharacter</font>::<font class="Function">Jump</font>() {
        // Jump 函数内的对应定义部分，就不具体写了
    }</code></pre>
					<p class="FontParagraph">&emsp;&emsp; <font class="Variables">InputComponent</font>-&gt;<font class="Function">BindAction</font>(<font class="StringText">"Jump"</font>, <font class="PreprocessorMacros">IE_Pressed</font>, <font class="KeyWord">this</font>, &amp;<font class="Class">AMyCharacter</font>::<font class="Function">Jump</font>); 这句话的意思是，我给这个 <font class="PreprocessorMacros">Character</font> 绑定了一个我之前设置好的 Jump 按键映射，<font class="PreprocessorMacros">IE_Pressed</font> 是按下按下的时候触发，若为 <font class="PreprocessorMacros">IE_Pressed</font> 则是按键弹起也就是松开的时候触发，这个 <font class="KeyWord">this</font> 一般不用管，指的是作用于哪个 <font class="PreprocessorMacros">Actor</font>，很明显，一般都是作用于自己本身，所以一般不用管，而后面的 &amp;<font class="Class">AMyCharacter</font>::<font class="Function">Jump</font> 指你这个按键映射触发的时候对应的函数，这个函数为 <font class="Class">AMyCharacter</font> 内的 <font class="Function">Jump</font> 函数。</p>
					<br><br>
		  			<p class="FontParagraph">&emsp;&emsp;如要绑定的是轴映射，则具体步骤如下（代码可以左滑查看全部）：</p>
					<pre><code class="language-c++"><p>在 AMyCharacter.cpp 中，</p>
    void <font class="Class">AMyCharacter</font>::<font class="Function">SetupPlayerInputComponent</font>(<font class="KeyWord">class</font> <font class="Class">UInputComponent</font>* <font class="Variables">InputComponent</font>) {        
        <font class="Function">check</font>(<font class="Variables">InputComponent</font>);
        // 同理以上内容是自带的，下面这句才是你要写的
        <font class="Variables">InputComponent</font>-&gt;<font class="Function">BindAxis</font>("MoveForward", this, &amp;<font class="Class">AMyCharacter</font>::<font class="Function">MoveForward</font>);
    }
    void <font class="Class">AMyCharacter</font>::<font class="Function">MoveForward</font>(float <font class="Variables">Value</font>) {
        // MoveForward 函数内的定义部分，就不具体写了
    }</code></pre>
					<p class="FontParagraph">&emsp;&emsp;与按键映射不同，轴映射是有一个返回值的，所以他的对应函数是要传入一个值来判断我这个轴的方向的，所以我们的 <font class="Function">MoveForward</font> 函数是要传入一个 <font class="KeyWord">float</font> 的数值，这个数值就是我们所按下的按键所返回的值，这些都是在我们的 Project Settings 中设置好的，例如，w 是 1 ，s 是 -1，则触发这个轴映射的时候，按下 w 的时候我们的 <font class="Function">MoveForward</font> 函数传入的 <font class="Variables">Value</font> 的值是 1，同理，按下 s 的时候为 -1。与按键映射不同，绑定轴映射用的是 <font class="Variables">InputComponent</font>-&gt;<font class="Function">BindAxis</font>(<font class="StringText">"MoveForward"</font>, <font class="KeyWord">this</font>, &amp;<font class="Class">AMyCharacter</font>::<font class="Function">MoveForward</font>); 与按键映射相比，少了那个写 <font class="PreprocessorMacros">IE_Pressed</font> 或 <font class="PreprocessorMacros">IE_Released</font> 的地方，其余位置对应的意思与按键映射的绑定是几乎一样的，就不重复介绍了。</p>
				  </div>
				  <div class="col-xs-1"></div>
			</div>
				  
          </div>
        </div>
        <!-- /main area -->
      </div>
      <!-- /content panel -->
    </div>

    <!-- build:js({.tmp,app}) scripts/app.min.js -->
<script src="../../vendor/jquery/dist/jquery.js"></script> 
<script src="../../vendor/bootstrap/dist/js/bootstrap.js"></script> 
<script src="../../scripts/constants.js"></script> 
<script src="../../scripts/main.js"></script> 
<script src="../../vendor/highlight/highlight.pack.js"></script>
<script>hljs.initHighlighting()();</script>
<!-- endbuild -->
  </body>
</html>
